<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		* { margin: 0; }
			canvas {
				display: block;
				width: 100%;
				height: 100%;
			}
	</style>
</head>

<body>
	<!-- Import maps polyfill -->
	<!-- Remove this when import maps will be widely supported -->
	<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

	<script type="importmap">
		{
			"imports": {
				"three": "./libs/three.module.js"
			}
		}
	</script>

	<script type="module">
		import { Scene, PerspectiveCamera, WebGLRenderer, MeshBasicMaterial, Mesh, BoxGeometry, BufferGeometry, Color, } from 'three';
		import { GUI } from './libs/jsm/libs/lil-gui.module.min.js';
		import { OrbitControls } from './libs/jsm/controls/OrbitControls.js';

		let scene, camera, renderer, gui;

		gui = new GUI();

		scene = new Scene();
		scene.background = new Color( 0x444444 );

		camera = new PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 50 );
		camera.position.z = 30;

		renderer = new WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.body.appendChild( renderer.domElement );

		const data = {
			width: 15,
			height: 15,
			depth: 15,
			widthSegments: 1,
			heightSegments: 1,
			depthSegments: 1
		};



		const geometry = new BoxGeometry(data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments)
		const material = new MeshBasicMaterial( { color: 0x00ff00 } );
		// 创建网格
		const cube = new Mesh( geometry, material );
		scene.add( cube );

		const folder = gui.addFolder( 'THREE.BoxGeometry' );
		folder.add( data, 'width', 1, 30 ).onChange( (e) => { generateGeometry(e, 'width')} );
		folder.add( data, 'height', 1, 30 ).onChange( generateGeometry );
		folder.add( data, 'depth', 1, 30 ).onChange( generateGeometry );
		folder.add( data, 'widthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );
		folder.add( data, 'heightSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );
		folder.add( data, 'depthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );


		function generateGeometry(val, key) {
			cube.geometry[key] = val // ???
		}

		function render() {

			requestAnimationFrame( render );

			cube.rotation.x += 0.005;
			cube.rotation.y += 0.005;

			renderer.render( scene, camera );

		}

		window.addEventListener( 'resize', function () {

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );

		}, false );

		render();

	</script>
</body>

</html>